import{as as V,h as k,g as h,j as q,d as T,o as x,b as I,I as _,w as L,m as l,n as E,O as S,r as j,k as M,a2 as z,c as D,e as N,a7 as O,a8 as R,T as A,at as F,au as $}from"./framework.NqrVI3a2.js";const oe=(e,s)=>{if(e.install=o=>{for(const t of[e,...Object.values(s??{})])o.component(t.name,t)},s)for(const[o,t]of Object.entries(s))e[o]=t;return e},P=(e,s)=>(e.install=o=>{e._context=o._context,o.config.globalProperties[s]=e},e);let G=1e3;const H=()=>G++,v=V([]),J=e=>{const s=v.findIndex(c=>c.id===e),o=v[s];let t;return s>0&&(t=v[s-1]),{current:o,prev:t}},K=e=>{const{prev:s}=J(e);return s?s.vm.exposed.bottom.value:0},Q=(e,s)=>{let o;const{delay:t,offset:c,id:p,showClose:d,type:r}=e,a=k(!0),u=h(()=>K(p)+c),f=h(()=>{let w=0;return s.value&&(w=s.value.getBoundingClientRect().height),w+u.value}),m=()=>{t!==0&&(o=setTimeout(()=>{a.value=!1},t))};q(()=>{m()});const y=()=>{o&&clearTimeout(o)},C=()=>{m()},g=()=>{a.value=!1},n=H(),i=h(()=>({top:`${u.value}px`,zIndex:n})),B=h(()=>["qf-message",r?`qf-message--${r}`:""]);return{onMouseEnter:y,onMouseLeave:C,selfVisible:a,msgStyle:i,classList:B,close:g,bottom:f,showClose:d}},U=["id"],W={class:"qf-message__content"},X=T({name:"qf-message"}),Y=T({...X,props:{delay:{default:2e3},offset:{default:12},id:{},appendTo:{default:"body"},type:{},showClose:{type:Boolean,default:!1}},emits:["close","destroy"],setup(e,{expose:s,emit:o}){const t=e,c=o,p=k(),{selfVisible:d,onMouseEnter:r,onMouseLeave:a,msgStyle:u,close:f,bottom:m,classList:y,showClose:C}=Q(t,p);return s({selfVisible:d,bottom:m}),(g,n)=>(x(),I(F,{to:"body"},[_(A,{name:"qf-message-fade",onBeforeLeave:n[3]||(n[3]=i=>c("close")),onAfterLeave:n[4]||(n[4]=i=>c("destroy"))},{default:L(()=>[R(M("div",{ref_key:"container",ref:p,id:g.id,class:E(l(y)),style:S(l(u)),onMouseenter:n[1]||(n[1]=(...i)=>l(r)&&l(r)(...i)),onMouseleave:n[2]||(n[2]=(...i)=>l(a)&&l(a)(...i))},[M("div",W,[j(g.$slots,"default")]),l(C)?(x(),D("div",{key:0,class:"qf-message__close",onClick:n[0]||(n[0]=z((...i)=>l(f)&&l(f)(...i),["stop"]))}," 关闭按钮 ")):N("",!0)],46,U),[[O,l(d)]])]),_:3})]))}});let Z=1;const ee=["success","warning","info","error"],b=(e={})=>{const{appendTo:s,delay:o,message:t="",type:c,showClose:p}=e,d=document.createElement("div"),r=`message-${Z++}`;let a=_(Y,{id:r,delay:o,appendTo:s,type:c,showClose:p,onClose(){const m=v.findIndex(y=>y.id===r);m!==-1&&v.splice(m,1)},onDestroy(){a=null,$(null,d)}},{default:typeof t=="function"?t:()=>t});$(a,d),document.body.appendChild(d.firstChild);const u=a.component,f={id:r,vnode:a,vm:u,close(){return u.exposed.selfVisible.value=!1}};return v.push(f),f};ee.forEach(e=>{b[e]=s=>(s.type=e,b(s))});const te=P(b,"$message");export{te as a,H as r,oe as s};
